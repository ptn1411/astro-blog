---
import { Icon } from 'astro-icon/components';
import Headline from '~/components/ui/Headline.astro';
import WidgetWrapper from '~/components/ui/WidgetWrapper.astro';
import type { Widget } from '~/types';

export interface Props extends Widget {
  title?: string;
  subtitle?: string;
  tagline?: string;
  features?: {
    title: string;
    description?: string;
    icon?: string;
  }[];
  columns?: number;
}

const {
  title = '',
  subtitle = '',
  tagline = '',
  features = [],
  columns = 2,
  id,
  isDark = false,
  classes = {},
  bg = await Astro.slots.render('bg'),
  ...rest
} = Astro.props;

const colsClass = columns === 1 ? 'md:grid-cols-1' : `md:grid-cols-${columns}`;
---

<WidgetWrapper
  id={id}
  isDark={isDark}
  containerClass={`max-w-6xl mx-auto ${classes?.container ?? ''}`}
  bg={bg}
  {...rest}>
  <Headline title={title} subtitle={subtitle} tagline={tagline} />

  <div class:list={['grid gap-6 grid-cols-1', colsClass]}>
    {
      features.map((feature) => (
        <div class="flex gap-4">
          <div class="flex-shrink-0 w-8 h-8 bg-green-100 dark:bg-green-900 rounded-full flex items-center justify-center text-green-600 dark:text-green-400">
            {feature.icon ? <Icon name={feature.icon} class="w-5 h-5" /> : <span>âœ“</span>}
          </div>
          <div>
            <h4 class="font-semibold mb-1 dark:text-white">{feature.title}</h4>
            {feature.description && (
              <p class="text-gray-600 dark:text-slate-400 text-sm" set:html={feature.description} />
            )}
          </div>
        </div>
      ))
    }
  </div>
</WidgetWrapper>
