---
import Image from '~/components/common/Image.astro';
import Button from '~/components/ui/Button.astro';
import type { Banner as Props } from '~/types';

const { title = '', subtitle = '', image, actions = [], variant = 'default', id, classes = {}, bg = '' } = Astro.props;

const bgClass =
  variant === 'gradient'
    ? 'bg-gradient-to-r from-blue-600 to-purple-600'
    : variant === 'dark'
      ? 'bg-slate-900'
      : 'bg-blue-600';
---

<section class:list={['relative not-prose py-20 text-white', bgClass, classes?.container]} {...id ? { id } : {}}>
  <Fragment set:html={bg} />

  {
    image && (
      <div class="absolute inset-0 z-0">
        <Image
          class="w-full h-full object-cover opacity-30"
          widths={[400, 768, 1024, 2040]}
          sizes="100vw"
          loading="eager"
          {...image}
        />
      </div>
    )
  }

  <div class="relative z-10 max-w-4xl mx-auto px-4 text-center">
    {title && <h2 class="text-4xl md:text-5xl font-bold mb-4 font-heading" set:html={title} />}
    {subtitle && <p class="text-xl text-white/80 mb-8" set:html={subtitle} />}
    {
      actions.map((action) => {
        const { type, ...buttonProps } = action;

        const className =
          type === 'secondary'
            ? 'bg-transparent border border-white text-white hover:bg-white/10'
            : 'bg-white text-blue-600 hover:bg-gray-100';

        return <Button {...buttonProps} class={className} />;
      })
    }
  </div>
</section>
