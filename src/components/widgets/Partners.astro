---
import Image from '~/components/common/Image.astro';
import Headline from '~/components/ui/Headline.astro';
import WidgetWrapper from '~/components/ui/WidgetWrapper.astro';
import type { Widget } from '~/types';

export interface Props extends Widget {
  title?: string;
  subtitle?: string;
  tagline?: string;
  partners?: {
    name: string;
    description?: string;
    logo?: { src: string; alt?: string };
    href?: string;
  }[];
}

const {
  title = '',
  subtitle = '',
  tagline = '',
  partners = [],
  id,
  isDark = false,
  classes = {},
  bg = await Astro.slots.render('bg'),
  ...rest
} = Astro.props;
---

<WidgetWrapper
  id={id}
  isDark={isDark}
  containerClass={`max-w-7xl mx-auto ${classes?.container ?? ''}`}
  bg={bg}
  {...rest}>
  <Headline title={title} subtitle={subtitle} tagline={tagline} />

  <div class="grid gap-8 md:grid-cols-2 lg:grid-cols-3">
    {
      partners.map((partner) => {
        const Wrapper = partner.href ? 'a' : 'div';
        return (
          <Wrapper
            {...(partner.href ? { href: partner.href, target: '_blank', rel: 'noopener noreferrer' } : {})}
            class:list={[
              'flex items-center gap-4 p-4 bg-white dark:bg-slate-900 rounded-lg shadow',
              partner.href && 'hover:shadow-lg transition-shadow cursor-pointer',
            ]}>
            {partner.logo && (
              <Image class="w-16 h-16 object-contain flex-shrink-0" width={64} height={64} {...partner.logo} />
            )}
            <div>
              <h4 class="font-bold dark:text-white">{partner.name}</h4>
              {partner.description && <p class="text-sm text-gray-500 dark:text-slate-400">{partner.description}</p>}
            </div>
          </Wrapper>
        );
      })
    }
  </div>
</WidgetWrapper>
