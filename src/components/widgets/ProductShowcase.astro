---
import Image from '~/components/common/Image.astro';
import Button from '~/components/ui/Button.astro';
import Headline from '~/components/ui/Headline.astro';
import WidgetWrapper from '~/components/ui/WidgetWrapper.astro';
import type { Widget } from '~/types';

export interface Props extends Widget {
  title?: string;
  subtitle?: string;
  tagline?: string;
  products?: {
    name: string;
    description?: string;
    price?: string;
    image?: { src: string; alt?: string };
    callToAction?: { text: string; href: string };
  }[];
}

const {
  title = '',
  subtitle = '',
  tagline = '',
  products = [],
  id,
  isDark = false,
  classes = {},
  bg = await Astro.slots.render('bg'),
  ...rest
} = Astro.props;
---

<WidgetWrapper
  id={id}
  isDark={isDark}
  containerClass={`max-w-7xl mx-auto ${classes?.container ?? ''}`}
  bg={bg}
  {...rest}>
  <Headline title={title} subtitle={subtitle} tagline={tagline} />

  <div class="grid gap-8 md:grid-cols-2 lg:grid-cols-3">
    {
      products.map((product) => (
        <div class="bg-white dark:bg-slate-900 rounded-xl shadow-lg p-6 text-center hover:shadow-xl transition-shadow">
          {product.image && (
            <Image class="w-32 h-32 mx-auto mb-4 object-contain" width={128} height={128} {...product.image} />
          )}
          <h3 class="font-bold text-lg mb-2 dark:text-white">{product.name}</h3>
          {product.description && (
            <p class="text-gray-600 dark:text-slate-400 text-sm mb-4" set:html={product.description} />
          )}
          {product.price && <p class="text-2xl font-bold text-blue-600 dark:text-blue-400 mb-4">{product.price}</p>}
          {product.callToAction && <Button {...product.callToAction} variant="primary" />}
        </div>
      ))
    }
  </div>
</WidgetWrapper>
