---
import CallToAction from "~/components/widgets/CallToAction.astro";
import FAQs from "~/components/widgets/FAQs.astro";
import Features3 from "~/components/widgets/Features3.astro";
import HeroText from "~/components/widgets/HeroText.astro";
import Prices from "~/components/widgets/Pricing.astro";
import Layout from "~/layouts/PageLayout.astro";
import { getCanonical } from "~/utils/permalinks";
import { buildProfessionalServiceSchema } from "~/utils/structured-data";

const canonical = String(getCanonical(Astro.url.pathname));

const metadata = {
  title: 'Bảng giá - Phạm Thành Nam',
  description:
    'Bảng giá minh bạch cho dịch vụ phát triển phần mềm của Phạm Thành Nam, đáp ứng từ MVP cá nhân tới hệ thống doanh nghiệp.',
  canonical,
  structuredData: [
    buildProfessionalServiceSchema({
      url: canonical,
      serviceTypes: [
        'Tư vấn và xây dựng MVP',
        'Phát triển nền tảng fullstack',
        'Triển khai hệ thống doanh nghiệp',
      ],
      description:
        'Bảng giá nêu rõ các gói dịch vụ cho nhu cầu phát triển sản phẩm số ở nhiều quy mô.',
    }),
    {
      '@type': 'OfferCatalog',
      name: 'Bảng giá dịch vụ phát triển phần mềm',
      url: canonical,
      description:
        'Danh mục các gói dịch vụ Starter, Professional và Enterprise cho nhu cầu xây dựng sản phẩm.',
      itemListElement: [
        {
          '@type': 'Offer',
          name: 'Starter',
          priceCurrency: 'USD',
          price: '200',
          itemOffered: {
            '@type': 'Service',
            name: 'Gói Starter',
            description: 'Phát triển frontend/backend với thiết lập triển khai cơ bản cho MVP nhỏ.',
          },
        },
        {
          '@type': 'Offer',
          name: 'Professional',
          priceCurrency: 'USD',
          price: '600',
          itemOffered: {
            '@type': 'Service',
            name: 'Gói Professional',
            description: 'Hệ thống fullstack, CI/CD và hỗ trợ sau bàn giao cho startup tăng trưởng.',
          },
        },
        {
          '@type': 'Offer',
          name: 'Enterprise',
          priceCurrency: 'USD',
          price: '1500',
          itemOffered: {
            '@type': 'Service',
            name: 'Gói Enterprise',
            description: 'Giải pháp tùy chỉnh cho hệ thống phức tạp, mở rộng và tư vấn chuyên sâu.',
          },
        },
      ],
    },
  ],
};
---

<Layout metadata={metadata}>
  <!-- Hero -->
  <HeroText
    tagline="Bảng giá"
    title="Minh bạch và linh hoạt"
    subtitle="Mỗi dự án đều khác nhau - nhưng triết lý định giá của tôi luôn giữ vững: công bằng, rõ ràng và chú trọng giá trị."
  />

  <!-- Services Pricing -->
  <Prices
    title="Các gói phát triển"
    subtitle="Chọn gói phù hợp với nhu cầu của bạn. Không phí ẩn, không bất ngờ."
    prices={[
      {
        title: 'Starter',
        subtitle: 'Dành cho dự án cá nhân nhỏ hoặc MVP',
        price: 200,
        period: 'mỗi dự án',
        items: [
          { description: 'Frontend (React / Astro / Tailwind)' },
          { description: 'Backend (Node.js / PHP)' },
          { description: 'Thiết lập triển khai (PM2 / Docker / Nginx)' },
          { description: 'Hỗ trợ 1 tuần sau bàn giao' },
        ],
        callToAction: {
          text: 'Bắt đầu dự án',
          href: '/contact',
        },
      },
      {
        title: 'Professional',
        subtitle: 'Phù hợp cho startup và ứng dụng fullstack',
        price: 600,
        period: 'mỗi dự án',
        hasRibbon: true,
        ribbonTitle: 'Phổ biến nhất',
        items: [
          { description: 'Hệ thống fullstack (Next.js / Node / Prisma / Postgres)' },
          { description: 'Xác thực, dashboard quản trị, tích hợp API' },
          { description: 'Môi trường CI/CD & Docker' },
          { description: 'Hỗ trợ 2 tuần sau khi ra mắt' },
        ],
        callToAction: {
          text: 'Cùng hợp tác',
          href: '/contact',
        },
      },
      {
        title: 'Enterprise',
        subtitle: 'Cho hệ thống phức tạp hoặc xây dựng dài hạn',
        price: 1500,
        period: 'từ',
        items: [
          { description: 'Ứng dụng phức hợp hoặc nền tảng đa dịch vụ' },
          { description: 'Kiến trúc tùy chỉnh (Go, microservice, Redis, scaling)' },
          { description: 'Triển khai và bảo mật nâng cao' },
          { description: 'Đồng hành phát triển & tư vấn chuyên sâu' },
        ],
        callToAction: {
          text: 'Trao đổi dự án',
          href: '/contact',
        },
      },
    ]}
  />

  <!-- Features -->
  <Features3
    title="Vì sao làm việc cùng tôi"
    subtitle="Không chỉ là code - tôi ưu tiên sự ổn định, rõ ràng và sáng tạo trong từng dự án."
    columns={2}
    items={[
      {
        title: 'Chuyên môn fullstack',
        description:
          'Từ API backend đến thiết kế giao diện, tôi bao quát toàn bộ quá trình phát triển - Node.js, Go, React và hơn thế nữa.',
        icon: 'tabler:layers-linked',
      },
      {
        title: 'Quy trình minh bạch',
        description: 'Bạn luôn biết đang xây dựng gì, mất bao lâu và gồm những gì - không điều bất ngờ.',
        icon: 'tabler:clipboard-list',
      },
      {
        title: 'Hợp tác thực sự',
        description: 'Tôi xem mỗi dự án là một sự đồng hành - chúng ta cùng lặp lại, hoàn thiện và phát triển.',
        icon: 'tabler:users',
      },
      {
        title: 'Code bền vững',
        description: 'Tôi tạo ra hệ thống dễ đọc, dễ bảo trì và có thể mở rộng trong nhiều năm.',
        icon: 'tabler:code',
      },
    ]}
    classes={{ container: 'max-w-5xl' }}
  />

  <!-- FAQs -->
  <FAQs
    title="Câu hỏi thường gặp"
    subtitle="Vẫn còn thắc mắc về chi phí hoặc quy trình? Đây là một vài câu trả lời nhanh."
    columns={1}
    items={[
      {
        title: 'Chúng ta có thể bắt đầu bằng dự án nhỏ không?',
        description:
          'Hoàn toàn được. Nhiều khách hàng khởi đầu bằng MVP ngắn hoặc prototype trước khi mở rộng thành sản phẩm hoàn chỉnh.',
      },
      {
        title: 'Thanh toán diễn ra thế nào?',
        description: 'Chi phí được chia thành các mốc rõ ràng (thường 50% đầu dự án, 50% khi bàn giao).',
      },
      {
        title: 'Bạn có hỗ trợ vận hành lâu dài không?',
        description: 'Có. Tôi cung cấp gói bảo trì linh hoạt hoặc hợp đồng retainer tùy quy mô dự án.',
      },
      {
        title: 'Tôi chỉ muốn thuê tư vấn thì sao?',
        description: 'Tất nhiên. Tôi nhận review kiến trúc, tối ưu hiệu năng hoặc mentoring cho đội ngũ nội bộ.',
      },
    ]}
  />

  <!-- CTA -->
  <CallToAction
    title="Bạn đang ấp ủ ý tưởng?"
    subtitle="Hãy biến nó thành sản phẩm thực tế - tôi sẽ đồng hành cùng bạn trong toàn bộ hành trình."
    actions={[
      { variant: 'primary', text: 'Liên hệ', href: '/contact' },
      { variant: 'secondary', text: 'Xem dự án', href: '/personal#projects' },
    ]}
  />
</Layout>





